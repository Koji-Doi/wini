# Wini.pm version 0 → 1 変更点

## ファイル名の変更

perlの流儀に従い、当該スクリプトファイルの名称をwini.pmからWini.pmに変更した。

## 新たに導入された概念

### Wini.pmとMarkgaab

version0の段階では、winiという名称を２つの意味合いでつかっていた。すなわち、軽量マークアップ言語とサポートプログラムである。しかし、version1のリリースに伴い、定義を再整理することにした。

今後、**Wini.pmがサポートしている軽量マークアップ言語はmarkgaabと呼ばれることになる。** markgaab とはMARKup Going Above And Beyondの略である。そして、**markgaabをHTMLに変換するツールのみがwiniと呼ばれることになる。**


### テンプレート

定型的なHTMLドキュメントの効率的な生成のため、テンプレートファイルを利用できるようにした。テンプレートの中では可変部分を「変数」（後述）として記述しておく。別途パラメータファイルから各変数の値を取得してテンプレートにあてがうことで、個別のHTMLファイルが生成できる仕組みである。もちろんパラメータ辞退をmarkgaabで記述することもできる。

### 「セクション」

新しいHTMLに追加された「文章構造化タグ」（&lt;section>, &lt;header>, &lt;footer>, &lt;aside>, &lt;nav>など）に対応する「セクション」概念が導入された。markgaabテキストは階層的に構成された複数のセクションを保つことが出来る。また、其々のセクションは独自の変数空間（後述）を持つことが出来る。これによってセクションごとに言語指定を切り替えるなどの対応が可能となる。

### 変数とスタック

markgaabテキスト内に「変数」を定義できる。

Wini.pmの振る舞いを変更するためのオプションパラメータとしたり、複雑なテキストを単純な文字列に置き換えて繰り返し使う「簡易マクロ」としたりできる。

変数には、単一の値ではなく、複数の値からなるリストを格納できる。これを「スタック」と呼ぶことにする。これを活用することにより、動的なドキュメント作成が可能となる。参考文献リストの作成にも不可欠な機能である。

## 新たに使えるようになった機能

### 一括処理

旧バージョンでは入力元としてたった一つのファイルもしくは標準入力しか受け付けなかったが、新バージョンでは、指定ディレクトリ内の全部のソースファイルを一括してHTML変換できる。

一括変換機能とテンプレートの利用により、HUGOなどの静的サイトジェネレーター(SSG)の機能を模倣できるようになった。つまり、対象WINIファイルを直接HTML化するかわりに、そのデータを鋳型となるHTMLファイルの所定の位置に埋め込んでいくことによって成熟HTMLファイルを生成する方式をサポートする。

### 多国語対応

環境変数LANGまたはコマンドラインオプションLANGにより、使用言語を指定できるようになった。言語指定は出力HTMLに反映されるだけでなく、スクリプト動作時のメッセージの言語も切り替わる。ただし現時点では英語(en)および日本語(ja)のみに対応している。

### 出典情報管理

信ぴょう性ある情報提供を期す上で不可欠な引用元・参照元の文献・URLなどの提示を簡便に実現できるように機能拡張した。これには、所定の形式で書誌情報やURLなどを書き記すためのマクロ、外部検索サイトや文献管理ソフトからenw形式のファイルを通して書誌情報などを一括して取り込むためのオプションなどが含まれる。

### アドインライブラリ

特定の目的に特化したマクロやCSSなどの設定を「アドインパッケージ」とまとめておくことができる。Wini.pmにアドインパッケージを読み込むと、設定が上書きされ、追加されたマクロが標準マクロと同じように利用できるようになる。
